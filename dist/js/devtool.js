var ce=Object.defineProperty;var o=(J,V)=>ce(J,"name",{value:V,configurable:!0});define("dynamic-modules/devtool",["exports"],function(J){"use strict";function V(p,q,c={}){const A=Object.assign({tab:"	",indentOn:/{$/,spellcheck:!1,addClosing:!0},c);let T=[],_=[],S=-1,u=!1,C,z,j=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;p.setAttribute("contentEditable",j?"true":"plaintext-only"),p.setAttribute("spellcheck",A.spellcheck?"true":"false"),p.style.outline="none",p.style.overflowWrap="break-word",p.style.overflowY="auto",p.style.resize="vertical",p.style.whiteSpace="pre-wrap",q(p);const m=Z(()=>{const e=y();q(p),v(e)},30);let l=!1;const b=o(e=>!B(e)&&!K(e)&&e.key!=="Meta"&&e.key!=="Control"&&e.key!=="Alt"&&!e.key.startsWith("Arrow"),"shouldRecord"),F=Z(e=>{b(e)&&(E(),l=!1)},300),x=o((e,i)=>{T.push([e,i]),p.addEventListener(e,i)},"on");x("keydown",e=>{e.defaultPrevented||(z=D(),a(e),r(e),A.addClosing&&s(e),f(e),b(e)&&!l&&(E(),l=!0))}),x("keyup",e=>{e.defaultPrevented||e.isComposing||(z!==D()&&m(),F(e),C&&C(D()))}),x("focus",e=>{u=!0}),x("blur",e=>{u=!1}),x("paste",e=>{E(),L(e),E(),C&&C(D())});function y(){const e=window.getSelection(),i={start:0,end:0,dir:void 0};return I(p,d=>{if(d===e.anchorNode&&d===e.focusNode)return i.start+=e.anchorOffset,i.end+=e.focusOffset,i.dir=e.anchorOffset<=e.focusOffset?"->":"<-","stop";if(d===e.anchorNode)if(i.start+=e.anchorOffset,!i.dir)i.dir="->";else return"stop";else if(d===e.focusNode)if(i.end+=e.focusOffset,!i.dir)i.dir="<-";else return"stop";d.nodeType===Node.TEXT_NODE&&(i.dir!="->"&&(i.start+=d.nodeValue.length),i.dir!="<-"&&(i.end+=d.nodeValue.length))}),i}o(y,"save");function v(e){const i=window.getSelection();let d,w=0,k,M=0;if(e.dir||(e.dir="->"),e.start<0&&(e.start=0),e.end<0&&(e.end=0),e.dir=="<-"){const{start:U,end:W}=e;e.start=W,e.end=U}let H=0;I(p,U=>{if(U.nodeType!==Node.TEXT_NODE)return;const W=(U.nodeValue||"").length;if(H+W>=e.start&&(d||(d=U,w=e.start-H),H+W>=e.end))return k=U,M=e.end-H,"stop";H+=W}),d||(d=p),k||(k=p),e.dir=="<-"&&([d,w,k,M]=[k,M,d,w]),i.setBaseAndExtent(d,w,k,M)}o(v,"restore");function n(){const i=window.getSelection().getRangeAt(0),d=document.createRange();return d.selectNodeContents(p),d.setEnd(i.startContainer,i.startOffset),d.toString()}o(n,"beforeCursor");function t(){const i=window.getSelection().getRangeAt(0),d=document.createRange();return d.selectNodeContents(p),d.setStart(i.endContainer,i.endOffset),d.toString()}o(t,"afterCursor");function a(e){if(e.key==="Enter"){const i=n(),d=t();let[w]=O(i),k=w;if(A.indentOn.test(i)&&(k+=A.tab),(j||k.length>0)&&(R(e),N(`
`+k)),k!==w&&d[0]==="}"){const M=y();N(`
`+w),v(M)}}}o(a,"handleNewLine");function s(e){const i=`([{'"`,d=`)]}'"`,w=t();if(d.includes(e.key)&&w.substr(0,1)===e.key){const k=y();R(e),k.start=++k.end,v(k)}else if(i.includes(e.key)){const k=y();R(e);const M=e.key+d[i.indexOf(e.key)];N(M),k.start=++k.end,v(k)}}o(s,"handleSelfClosingCharacters");function r(e){if(e.key==="Tab")if(R(e),e.shiftKey){const i=n();let[d,w]=O(i);if(d.length>0){const k=y(),M=Math.min(A.tab.length,d.length);v({start:w,end:w+M}),document.execCommand("delete"),k.start-=M,k.end-=M,v(k)}}else N(A.tab)}o(r,"handleTabCharacters");function g(){const e=o(()=>{S--;const i=_[S];i&&(p.innerHTML=i.html,v(i.pos)),S<0&&(S=0)},"do_undo");SugarCube.setup.Dialogs.open({title:"Undo confirm",content:html`
                <div>
                Are you sure you want to UNDO your work? You may lose your work. It is advised to save your work first."
                </div>
                ${SugarCube.setup.DOM.Nav.button("Yes, I am sure I want to undo",()=>{e(),Dialog.close()})}
            `})}o(g,"doUndo");function h(){S++;const e=_[S];e&&(p.innerHTML=e.html,v(e.pos)),S>=_.length&&S--}o(h,"doRedo");function f(e){B(e)&&(R(e),g()),K(e)&&(R(e),h())}o(f,"handleUndoRedo");function E(){if(!u)return;const e=p.innerHTML,i=y(),d=_[S];if(d&&d.html===e&&d.pos.start===i.start&&d.pos.end===i.end)return;S++,_[S]={html:e,pos:i},_.splice(S+1);const w=300;S>w&&(S=w,_.splice(0,1))}o(E,"recordHistory");function L(e){R(e);const i=(e.originalEvent||e).clipboardData.getData("text/plain"),d=y();N(i),q(p),v({start:d.start+i.length,end:d.start+i.length})}o(L,"handlePaste");function I(e,i){const d=[];e.firstChild&&d.push(e.firstChild);let w=d.pop();for(;w&&i(w)!=="stop";)w.nextSibling&&d.push(w.nextSibling),w.firstChild&&d.push(w.firstChild),w=d.pop()}o(I,"visit");function G(e){return e.metaKey||e.ctrlKey}o(G,"isCtrl");function B(e){return G(e)&&!e.shiftKey&&e.key==="z"}o(B,"isUndo");function K(e){return G(e)&&e.shiftKey&&e.key==="z"||G(e)&&!e.shiftKey&&e.key==="y"}o(K,"isRedo");function N(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),document.execCommand("insertHTML",!1,e)}o(N,"insert");function Z(e,i){let d=0;return(...w)=>{clearTimeout(d),d=window.setTimeout(()=>e(...w),i)}}o(Z,"debounce");function O(e){let i=e.length-1;for(;i>=0&&e[i]!==`
`;)i--;i++;let d=i;for(;d<e.length&&/[ \t]/.test(e[d]);)d++;return[e.substring(i,d)||"",i,d]}o(O,"findPadding");function D(){return p.textContent||""}o(D,"toString");function R(e){e.preventDefault()}return o(R,"preventDefault"),{updateOptions(e){e=Object.assign(Object.assign({},e),e)},updateCode(e){p.textContent=e,q(p)},onUpdate(e){C=e},toString:D,saveSelection:y,restoreSelection:v,undo:g,redo:h,destroy(){for(let[e,i]of T)p.removeEventListener(e,i)}}}o(V,"CodeJar");var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function re(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}o(re,"getDefaultExportFromCjs");var X={exports:{}},ne;function se(){return ne||(ne=1,function(p){var q=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var c=function(A){var T=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,_=0,S={},u={manual:A.Prism&&A.Prism.manual,disableWorkerMessageHandler:A.Prism&&A.Prism.disableWorkerMessageHandler,util:{encode:o(function n(t){return t instanceof C?new C(t.type,n(t.content),t.alias):Array.isArray(t)?t.map(n):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},"encode"),type:o(function(n){return Object.prototype.toString.call(n).slice(8,-1)},"type"),objId:o(function(n){return n.__id||Object.defineProperty(n,"__id",{value:++_}),n.__id},"objId"),clone:o(function n(t,a){a=a||{};var s,r;switch(u.util.type(t)){case"Object":if(r=u.util.objId(t),a[r])return a[r];s={},a[r]=s;for(var g in t)t.hasOwnProperty(g)&&(s[g]=n(t[g],a));return s;case"Array":return r=u.util.objId(t),a[r]?a[r]:(s=[],a[r]=s,t.forEach(function(h,f){s[f]=n(h,a)}),s);default:return t}},"deepClone"),getLanguage:o(function(n){for(;n;){var t=T.exec(n.className);if(t)return t[1].toLowerCase();n=n.parentElement}return"none"},"getLanguage"),setLanguage:o(function(n,t){n.className=n.className.replace(RegExp(T,"gi"),""),n.classList.add("language-"+t)},"setLanguage"),currentScript:o(function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(s){var n=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(s.stack)||[])[1];if(n){var t=document.getElementsByTagName("script");for(var a in t)if(t[a].src==n)return t[a]}return null}},"currentScript"),isActive:o(function(n,t,a){for(var s="no-"+t;n;){var r=n.classList;if(r.contains(t))return!0;if(r.contains(s))return!1;n=n.parentElement}return!!a},"isActive")},languages:{plain:S,plaintext:S,text:S,txt:S,extend:o(function(n,t){var a=u.util.clone(u.languages[n]);for(var s in t)a[s]=t[s];return a},"extend"),insertBefore:o(function(n,t,a,s){s=s||u.languages;var r=s[n],g={};for(var h in r)if(r.hasOwnProperty(h)){if(h==t)for(var f in a)a.hasOwnProperty(f)&&(g[f]=a[f]);a.hasOwnProperty(h)||(g[h]=r[h])}var E=s[n];return s[n]=g,u.languages.DFS(u.languages,function(L,I){I===E&&L!=n&&(this[L]=g)}),g},"insertBefore"),DFS:o(function n(t,a,s,r){r=r||{};var g=u.util.objId;for(var h in t)if(t.hasOwnProperty(h)){a.call(t,h,t[h],s||h);var f=t[h],E=u.util.type(f);E==="Object"&&!r[g(f)]?(r[g(f)]=!0,n(f,a,null,r)):E==="Array"&&!r[g(f)]&&(r[g(f)]=!0,n(f,a,h,r))}},"DFS")},plugins:{},highlightAll:o(function(n,t){u.highlightAllUnder(document,n,t)},"highlightAll"),highlightAllUnder:o(function(n,t,a){var s={callback:a,container:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};u.hooks.run("before-highlightall",s),s.elements=Array.prototype.slice.apply(s.container.querySelectorAll(s.selector)),u.hooks.run("before-all-elements-highlight",s);for(var r=0,g;g=s.elements[r++];)u.highlightElement(g,t===!0,s.callback)},"highlightAllUnder"),highlightElement:o(function(n,t,a){var s=u.util.getLanguage(n),r=u.languages[s];u.util.setLanguage(n,s);var g=n.parentElement;g&&g.nodeName.toLowerCase()==="pre"&&u.util.setLanguage(g,s);var h=n.textContent,f={element:n,language:s,grammar:r,code:h};function E(I){f.highlightedCode=I,u.hooks.run("before-insert",f),f.element.innerHTML=f.highlightedCode,u.hooks.run("after-highlight",f),u.hooks.run("complete",f),a&&a.call(f.element)}if(o(E,"insertHighlightedCode"),u.hooks.run("before-sanity-check",f),g=f.element.parentElement,g&&g.nodeName.toLowerCase()==="pre"&&!g.hasAttribute("tabindex")&&g.setAttribute("tabindex","0"),!f.code){u.hooks.run("complete",f),a&&a.call(f.element);return}if(u.hooks.run("before-highlight",f),!f.grammar){E(u.util.encode(f.code));return}if(t&&A.Worker){var L=new Worker(u.filename);L.onmessage=function(I){E(I.data)},L.postMessage(JSON.stringify({language:f.language,code:f.code,immediateClose:!0}))}else E(u.highlight(f.code,f.grammar,f.language))},"highlightElement"),highlight:o(function(n,t,a){var s={code:n,grammar:t,language:a};if(u.hooks.run("before-tokenize",s),!s.grammar)throw new Error('The language "'+s.language+'" has no grammar.');return s.tokens=u.tokenize(s.code,s.grammar),u.hooks.run("after-tokenize",s),C.stringify(u.util.encode(s.tokens),s.language)},"highlight"),tokenize:o(function(n,t){var a=t.rest;if(a){for(var s in a)t[s]=a[s];delete t.rest}var r=new m;return l(r,r.head,n),j(n,r,t,r.head,0),F(r)},"tokenize"),hooks:{all:{},add:o(function(n,t){var a=u.hooks.all;a[n]=a[n]||[],a[n].push(t)},"add"),run:o(function(n,t){var a=u.hooks.all[n];if(!(!a||!a.length))for(var s=0,r;r=a[s++];)r(t)},"run")},Token:C};A.Prism=u;function C(n,t,a,s){this.type=n,this.content=t,this.alias=a,this.length=(s||"").length|0}o(C,"Token"),C.stringify=o(function n(t,a){if(typeof t=="string")return t;if(Array.isArray(t)){var s="";return t.forEach(function(E){s+=n(E,a)}),s}var r={type:t.type,content:n(t.content,a),tag:"span",classes:["token",t.type],attributes:{},language:a},g=t.alias;g&&(Array.isArray(g)?Array.prototype.push.apply(r.classes,g):r.classes.push(g)),u.hooks.run("wrap",r);var h="";for(var f in r.attributes)h+=" "+f+'="'+(r.attributes[f]||"").replace(/"/g,"&quot;")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+h+">"+r.content+"</"+r.tag+">"},"stringify");function z(n,t,a,s){n.lastIndex=t;var r=n.exec(a);if(r&&s&&r[1]){var g=r[1].length;r.index+=g,r[0]=r[0].slice(g)}return r}o(z,"matchPattern");function j(n,t,a,s,r,g){for(var h in a)if(!(!a.hasOwnProperty(h)||!a[h])){var f=a[h];f=Array.isArray(f)?f:[f];for(var E=0;E<f.length;++E){if(g&&g.cause==h+","+E)return;var L=f[E],I=L.inside,G=!!L.lookbehind,B=!!L.greedy,K=L.alias;if(B&&!L.pattern.global){var N=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,N+"g")}for(var Z=L.pattern||L,O=s.next,D=r;O!==t.tail&&!(g&&D>=g.reach);D+=O.value.length,O=O.next){var R=O.value;if(t.length>n.length)return;if(!(R instanceof C)){var e=1,i;if(B){if(i=z(Z,D,n,G),!i||i.index>=n.length)break;var M=i.index,d=i.index+i[0].length,w=D;for(w+=O.value.length;M>=w;)O=O.next,w+=O.value.length;if(w-=O.value.length,D=w,O.value instanceof C)continue;for(var k=O;k!==t.tail&&(w<d||typeof k.value=="string");k=k.next)e++,w+=k.value.length;e--,R=n.slice(D,w),i.index-=D}else if(i=z(Z,0,R,G),!i)continue;var M=i.index,H=i[0],U=R.slice(0,M),W=R.slice(M+H.length),Q=D+R.length;g&&Q>g.reach&&(g.reach=Q);var Y=O.prev;U&&(Y=l(t,Y,U),D+=U.length),b(t,Y,e);var ue=new C(h,I?u.tokenize(H,I):H,K,H);if(O=l(t,Y,ue),W&&l(t,O,W),e>1){var ee={cause:h+","+E,reach:Q};j(n,t,a,O.prev,D,ee),g&&ee.reach>g.reach&&(g.reach=ee.reach)}}}}}}o(j,"matchGrammar");function m(){var n={value:null,prev:null,next:null},t={value:null,prev:n,next:null};n.next=t,this.head=n,this.tail=t,this.length=0}o(m,"LinkedList");function l(n,t,a){var s=t.next,r={value:a,prev:t,next:s};return t.next=r,s.prev=r,n.length++,r}o(l,"addAfter");function b(n,t,a){for(var s=t.next,r=0;r<a&&s!==n.tail;r++)s=s.next;t.next=s,s.prev=t,n.length-=r}o(b,"removeRange");function F(n){for(var t=[],a=n.head.next;a!==n.tail;)t.push(a.value),a=a.next;return t}if(o(F,"toArray"),!A.document)return A.addEventListener&&(u.disableWorkerMessageHandler||A.addEventListener("message",function(n){var t=JSON.parse(n.data),a=t.language,s=t.code,r=t.immediateClose;A.postMessage(u.highlight(s,u.languages[a],a)),r&&A.close()},!1)),u;var x=u.util.currentScript();x&&(u.filename=x.src,x.hasAttribute("data-manual")&&(u.manual=!0));function y(){u.manual||u.highlightAll()}if(o(y,"highlightAutomaticallyCallback"),!u.manual){var v=document.readyState;v==="loading"||v==="interactive"&&x&&x.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return u}(q);p.exports&&(p.exports=c),typeof te<"u"&&(te.Prism=c),c.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},c.languages.markup.tag.inside["attr-value"].inside.entity=c.languages.markup.entity,c.languages.markup.doctype.inside["internal-subset"].inside=c.languages.markup,c.hooks.add("wrap",function(A){A.type==="entity"&&(A.attributes.title=A.content.replace(/&amp;/,"&"))}),Object.defineProperty(c.languages.markup.tag,"addInlined",{value:o(function(T,_){var S={};S["language-"+_]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:c.languages[_]},S.cdata=/^<!\[CDATA\[|\]\]>$/i;var u={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:S}};u["language-"+_]={pattern:/[\s\S]+/,inside:c.languages[_]};var C={};C[T]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return T}),"i"),lookbehind:!0,greedy:!0,inside:u},c.languages.insertBefore("markup","cdata",C)},"addInlined")}),Object.defineProperty(c.languages.markup.tag,"addAttribute",{value:o(function(A,T){c.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+A+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[T,"language-"+T],inside:c.languages[T]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})},"value")}),c.languages.html=c.languages.markup,c.languages.mathml=c.languages.markup,c.languages.svg=c.languages.markup,c.languages.xml=c.languages.extend("markup",{}),c.languages.ssml=c.languages.xml,c.languages.atom=c.languages.xml,c.languages.rss=c.languages.xml,function(A){var T=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;A.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+T.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+T.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+T.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+T.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:T,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},A.languages.css.atrule.inside.rest=A.languages.css;var _=A.languages.markup;_&&(_.tag.addInlined("style","css"),_.tag.addAttribute("style","css"))}(c),c.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},c.languages.javascript=c.languages.extend("clike",{"class-name":[c.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),c.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,c.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:c.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:c.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:c.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:c.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:c.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),c.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:c.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),c.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),c.languages.markup&&(c.languages.markup.tag.addInlined("script","javascript"),c.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),c.languages.js=c.languages.javascript,function(){if(typeof c>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var A="Loading…",T=o(function(x,y){return"✖ Error "+x+" while fetching file: "+y},"FAILURE_MESSAGE"),_="✖ Error: File does not exist or is empty",S={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},u="data-src-status",C="loading",z="loaded",j="failed",m="pre[data-src]:not(["+u+'="'+z+'"]):not(['+u+'="'+C+'"])';function l(x,y,v){var n=new XMLHttpRequest;n.open("GET",x,!0),n.onreadystatechange=function(){n.readyState==4&&(n.status<400&&n.responseText?y(n.responseText):n.status>=400?v(T(n.status,n.statusText)):v(_))},n.send(null)}o(l,"loadFile");function b(x){var y=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(x||"");if(y){var v=Number(y[1]),n=y[2],t=y[3];return n?t?[v,Number(t)]:[v,void 0]:[v,v]}}o(b,"parseRange"),c.hooks.add("before-highlightall",function(x){x.selector+=", "+m}),c.hooks.add("before-sanity-check",function(x){var y=x.element;if(y.matches(m)){x.code="",y.setAttribute(u,C);var v=y.appendChild(document.createElement("CODE"));v.textContent=A;var n=y.getAttribute("data-src"),t=x.language;if(t==="none"){var a=(/\.(\w+)$/.exec(n)||[,"none"])[1];t=S[a]||a}c.util.setLanguage(v,t),c.util.setLanguage(y,t);var s=c.plugins.autoloader;s&&s.loadLanguages(t),l(n,function(r){y.setAttribute(u,z);var g=b(y.getAttribute("data-range"));if(g){var h=r.split(/\r\n?|\n/g),f=g[0],E=g[1]==null?h.length:g[1];f<0&&(f+=h.length),f=Math.max(0,Math.min(f-1,h.length)),E<0&&(E+=h.length),E=Math.max(0,Math.min(E,h.length)),r=h.slice(f,E).join(`
`),y.hasAttribute("data-start")||y.setAttribute("data-start",String(f+1))}v.textContent=r,c.highlightElement(v)},function(r){y.setAttribute(u,j),v.textContent=r})}}),c.plugins.fileHighlight={highlight:o(function(y){for(var v=(y||document).querySelectorAll(m),n=0,t;t=v[n++];)c.highlightElement(t)},"highlight")};var F=!1;c.fileHighlight=function(){F||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),F=!0),c.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(X)),X.exports}o(se,"requirePrism");var ie=se();const ae=re(ie),P=SugarCube.setup;function oe(p){p.languages.twee3={comment:/<!--[\s\S]*?-->|\/\*[\s\S]*?\*\/|\/%[\s\S]*?%\//,replace:{pattern:/\w+\|\w+/},macro:{pattern:/<<\/?[\s\S]*?\/?>>/,greedy:!0,inside:{"macro-header":{pattern:/^<<\/?[^\s>\/]+/,inside:{"macro-start":{pattern:/^<<\/?/,inside:{"macro-start":{pattern:/^<</,alias:"macro-delim"},"macro-closing":{pattern:/\//}}},"macro-name":/[\s\S]+/}},"macro-end":{pattern:/\/?>>$/,alias:"macro-delim"},"macro-inner":{pattern:/[\s\S]+/,inside:{"macro-arg":{pattern:/\S+(?:(?:"[^"]*"|'[^']*')\S*)*/,inside:p.languages.javascript}}}}},html:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{"html-delim":/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},"html-delim":/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},p.languages.twee3.html.inside["attr-value"].inside.entity=p.languages.twee3.entity;const q=["if","else","elseif"],c={elseif:"if",else:"if",case:"switch",default:"switch",opt:"choose",optif:"choose",option:"cycle",optionsfrom:"cycle",track:"createaudiogroup",next:"timed","onevent-callback":"onevent"};function A(m){let l=SugarCube.Macro.get(m);return!l&&c[m]&&(l=SugarCube.Macro.get(c[m])),l}o(A,"getMacro");function T(m){return/^(?:[$_]|setup\.)/.test(m)}o(T,"isVariable");function _(m){return/^("[^"]*"|'[^']*')$/.test(m)}o(_,"isStringLiteral");function S(m){return/^(\\d+(?:\\.\\d*)?|\\.\\d+)$/.test(m)}o(S,"isNumberLiteral");function u(m,l,b){l.classList.add("validation-error");const F=m.getAttribute("data-tooltip")||"",x=`<div class="validation-error-msg">${P.escapeHtml(b).replace(/\$/g,"$$$$")}</div>`;m.setAttribute("data-tooltip",F+x),m.setAttribute("data-tooltip-noclick","")}o(u,"setErrorMessage");const j=class j{constructor(){this.vars={},this.actors={};for(const l of P.DevToolHelper.getActors())this.actors[l[1]]=l[0]}getVariableType(l){return l==="$unit.player"?"actor":l.startsWith("$g.")?this.actors[l]?"actor":void 0:l.startsWith("setup.companytemplate.")||l.startsWith("$company.")?P.companytemplate[l.substr(l.lastIndexOf(".")+1)]?"company":void 0:l.startsWith("setup.")?P.ArgType.Unknown:this.vars[l]}validateArgument(l,b){if(T(b)){const F=this.getVariableType(b);return F!==void 0?F===P.ArgType.Unknown||F===l?!0:`variable ${b} type is ${F}, but expected ${l}`:b.startsWith("$g.")?`invalid actor "${b.substr(3)}"`:`unknown variable ${b}`}switch(l){case"string":return _(b);case"number":return S(b);case"boolean":return b==="true"||b==="false";case"unknown":return!0;case"actor":return!1;case"company":{if(_(b)){const F=b.substr(1,b.length-2);return F in P.companytemplate?!0:`Company "${F}" does not exist`}return!1}}return!0}validateArguments(l,b){if(l.length!==b.length)return!1;for(let F=0;F<l.length;++F){const x=this.validateArgument(l[F],b[F]);if(x!==!0)return x}return!0}validate(l){const b=$(l),F=b.find("> .macro-header > .macro-name").get(0);if(!F)return;const x=b.find("> .macro-header > .macro-start > .macro-closing").length>0,y=F.textContent,v=P.getMacroMetadata(y);l.setAttribute("data-tooltip",`<<devmacroinfo '${P.escapeJsString(y)}'>>`),l.setAttribute("data-tooltip-noclick","");const n=$(l).find("> .macro-inner > .macro-arg"),t=n.map((a,s)=>s.textContent);if(y==="set"){if(T(t[0])&&t[1]==="="){let a=P.ArgType.Unknown;t.length===3&&(a=this.getVariableType(t[2])||a),this.vars[t[0]]=a}}else y==="unset"&&delete this.vars[t[0]];if(x)t.length>0&&u(l,l,"A closing tag for a macro can't have arguments");else if(v&&v.args){const a=Array.isArray(v.args[0])?v.args:[v.args];if(a.length===1){const s=a[0];if(t.length!==s.length)u(l,l,"Expected "+v.args.length+" argument"+(v.args.length===1?"":"s")+", but "+t.length+" provided");else for(let r=0;r<s.length;++r){const g=this.validateArgument(s[r],t[r]);g!==!0&&u(l,n[r],"Argument "+(r+1)+": "+(typeof g=="string"?g:"invalid value"))}}else{let s=null,r=[];for(const g of a){const h=this.validateArguments(g,t);if(h===!0){s=g;break}else h!==!1&&(r.includes(h)||r.push(h))}s||(u(l,l,"Arguments do not match any of the signatures"),r.length&&r.map(g=>u(l,l,g)))}}}validateReplace(l){const b=l.textContent,[F,x]=b.split("|");F=="U"||`$g.${F}`in this.actors||u(l,l,`Unknown actor "${F}"`)}};o(j,"Validator");let C=j;p.hooks.add("after-highlight",function(m){const l=new C;for(const b of[...m.element.querySelectorAll(".macro")])l.validate(b);for(const b of[...m.element.querySelectorAll(".replace")])l.validateReplace(b)}),p.hooks.add("wrap",function(m){if((m.type==="html"||m.type==="macro")&&(m.attributes.spellcheck="false"),m.type==="macro-name"){const l=m.content;A(l)?(q.includes(l)&&m.classes.push("macro-control"),P.MACROS_METADATA[l]===null&&m.classes.push("error")):m.classes.push("error")}else if(m.type==="macro"){let l=m.content.match(/".*?\b(error|macro-control)\b.*?"/);l&&m.classes.push(l[1])}});function z(m,l){if(!p.languages[l])return;let b={};b["language-"+l]={pattern:/[\s\S]+/,inside:p.languages[l]};let F={};F[m]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return m}),"i"),lookbehind:!0,greedy:!0,inside:b},p.languages.insertBefore("twee3","html",F)}o(z,"addNested"),z("script","javascript"),z("style","css")}o(oe,"initPrismLanguageTwee3");function le(){return oe(ae),Promise.resolve({CodeJar:V,Prism:ae})}o(le,"initializeCodeJar"),console.info("%c[DevTool]%c Loaded dynamic module","color: seagreen",""),J.initializeCodeJar=le,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})});
